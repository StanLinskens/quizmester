<Window x:Class="QuizMester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:QuizMester"
        mc:Ignorable="d"
        Title="Quizmester - Trivial Pursuit Quiz Game" 
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize">

    <Window.Resources>
        <!-- Color Palette -->
        <SolidColorBrush x:Key="PrimaryBlue" Color="#1E3A8A"/>
        <SolidColorBrush x:Key="SecondaryBlue" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentGold" Color="#F59E0B"/>
        <SolidColorBrush x:Key="BackgroundGray" Color="#F8FAFC"/>
        <SolidColorBrush x:Key="TextDark" Color="#1F2937"/>
        <SolidColorBrush x:Key="SuccessGreen" Color="#10B981"/>
        <SolidColorBrush x:Key="ErrorRed" Color="#EF4444"/>
        <SolidColorBrush x:Key="WarningOrange" Color="#F97316"/>

        <!-- Category Colors -->
        <SolidColorBrush x:Key="ScienceColor" Color="#8B5CF6"/>
        <SolidColorBrush x:Key="HistoryColor" Color="#DC2626"/>
        <SolidColorBrush x:Key="SportsColor" Color="#059669"/>
        <SolidColorBrush x:Key="EntertainmentColor" Color="#D97706"/>
        <SolidColorBrush x:Key="GeographyColor" Color="#2563EB"/>
        <SolidColorBrush x:Key="LiteratureColor" Color="#7C2D12"/>

        <!-- Styles -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource SecondaryBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{StaticResource PrimaryBlue}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource AccentGold}"/>
            <Setter Property="FontSize" Value="16"/>
        </Style>

        <Style x:Key="CategoryWedge" TargetType="Ellipse">
            <Setter Property="Width" Value="80"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Stroke" Value="White"/>
            <Setter Property="StrokeThickness" Value="3"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="CategoryWedgeCompleted" TargetType="Ellipse" BasedOn="{StaticResource CategoryWedge}">
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Gold" ShadowDepth="0" BlurRadius="15"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style x:Key="ModernPasswordBox" TargetType="PasswordBox">
            <Setter Property="Padding" Value="10"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Background" Value="White"/>
        </Style>

        <Style x:Key="HeaderText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="32"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBlue}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,20"/>
        </Style>

        <Style x:Key="SubHeaderText" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextDark}"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,10"/>
        </Style>
    </Window.Resources>

    <Grid Background="{StaticResource BackgroundGray}">
        <!-- Main Content Area -->
        <Grid x:Name="MainContentGrid">

            <!-- LOGIN SCREEN -->
            <Grid x:Name="LoginScreen" Visibility="Visible">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1E3A8A" Offset="0"/>
                        <GradientStop Color="#3B82F6" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <Border Background="White" 
                        Width="400" Height="544" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.3"/>
                    </Border.Effect>

                    <StackPanel Margin="40">
                        <TextBlock Text="🧠 QUIZMESTER" 
                                   FontSize="28" FontWeight="Bold" 
                                   Foreground="{StaticResource PrimaryBlue}"
                                   HorizontalAlignment="Center" Margin="0,0,0,10"/>

                        <TextBlock Text="Trivial Pursuit Quiz Challenge" 
                                   FontSize="14" 
                                   Foreground="{StaticResource TextDark}"
                                   HorizontalAlignment="Center" Margin="0,0,0,40"/>

                        <TabControl Background="Transparent" BorderThickness="0">
                            <TabItem Header="Login" FontSize="14">
                                <StackPanel Margin="0,20">
                                    <TextBlock Text="Username:" Margin="0,10,0,5"/>
                                    <TextBox x:Name="LoginUsernameTextBox" Style="{StaticResource ModernTextBox}"/>

                                    <TextBlock Text="Password:" Margin="0,15,0,5"/>
                                    <PasswordBox x:Name="LoginPasswordBox" Style="{StaticResource ModernPasswordBox}"/>

                                    <Button x:Name="LoginButton" Content="LOGIN" 
                                            Style="{StaticResource PrimaryButton}" 
                                            Margin="0,25,0,10"/>
                                </StackPanel>
                            </TabItem>

                            <TabItem Header="Register" FontSize="14">
                                <StackPanel Margin="0,20">
                                    <TextBlock Text="Username:" Margin="0,5,0,5"/>
                                    <TextBox x:Name="RegisterUsernameTextBox" Style="{StaticResource ModernTextBox}"/>

                                    <TextBlock Text="Password:" Margin="0,10,0,5"/>
                                    <PasswordBox x:Name="RegisterPasswordBox" Style="{StaticResource ModernPasswordBox}"/>

                                    <TextBlock Text="Confirm Password:" Margin="0,10,0,5"/>
                                    <PasswordBox x:Name="ConfirmPasswordBox" Style="{StaticResource ModernPasswordBox}"/>

                                    <Button x:Name="RegisterButton" Content="REGISTER" 
                                            Style="{StaticResource PrimaryButton}" 
                                            Margin="0,20,0,10"/>
                                </StackPanel>
                            </TabItem>
                        </TabControl>

                        <Button x:Name="AdminLoginButton" Content="Admin Login" 
                                Style="{StaticResource ModernButton}" 
                                Background="#6B7280" Margin="0,10"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- MAIN GAME BOARD -->
            <Grid x:Name="GameBoardScreen" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="100"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="{StaticResource PrimaryBlue}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="🧠 QUIZMESTER" 
                                   FontSize="24" FontWeight="Bold" 
                                   Foreground="White" 
                                   VerticalAlignment="Center" 
                                   Margin="20,0"/>

                        <TextBlock Grid.Column="1" x:Name="PlayerNameText" 
                                   Text="Player: John Doe" 
                                   FontSize="16" Foreground="White" 
                                   VerticalAlignment="Center" 
                                   HorizontalAlignment="Center"/>

                        <Button Grid.Column="2" x:Name="ScoreboardButton" 
                                Content="📊 Scoreboard" 
                                Style="{StaticResource ModernButton}" 
                                Background="{StaticResource AccentGold}" 
                                VerticalAlignment="Center" Margin="10"/>
                    </Grid>
                </Border>

                <!-- Game Board -->
                <Grid Grid.Row="1" Margin="40">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Progress Text -->
                    <TextBlock Grid.Row="0" x:Name="ProgressText" 
                               Text="Complete each category to unlock the final challenge!"
                               Style="{StaticResource SubHeaderText}" 
                               Margin="0,0,0,30"/>

                    <!-- Category Board -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Science Category -->
                        <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center">
                            <Ellipse x:Name="ScienceWedge" 
                                     Fill="{StaticResource ScienceColor}" 
                                     Style="{StaticResource CategoryWedge}"/>
                            <TextBlock Text="🔬 SCIENCE" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock x:Name="ScienceStatusText" Text="Not Completed" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>

                        <!-- History Category -->
                        <StackPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center">
                            <Ellipse x:Name="HistoryWedge" 
                                     Fill="{StaticResource HistoryColor}" 
                                     Style="{StaticResource CategoryWedge}"/>
                            <TextBlock Text="🏛️ HISTORY" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock x:Name="HistoryStatusText" Text="Not Completed" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>

                        <!-- Center Hub -->
                        <StackPanel Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center">
                            <Ellipse x:Name="FinalWedge" Fill="#1F2937" 
                                     Width="100" Height="100" 
                                     Stroke="Gold" StrokeThickness="4"
                                     Margin="10"/>
                            <TextBlock Text="🏆 FINAL" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock Text="CHALLENGE" FontWeight="Bold" 
                                       HorizontalAlignment="Center"/>
                            <TextBlock x:Name="FinalStatusText" Text="Locked" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#EF4444" Margin="0,5"/>
                        </StackPanel>

                        <!-- Sports Category -->
                        <StackPanel Grid.Row="1" Grid.Column="2" HorizontalAlignment="Center">
                            <Ellipse x:Name="SportsWedge" 
                                     Fill="{StaticResource SportsColor}" 
                                     Style="{StaticResource CategoryWedge}"/>
                            <TextBlock Text="⚽ SPORTS" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock x:Name="SportsStatusText" Text="Not Completed" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>

                        <!-- Entertainment Category -->
                        <StackPanel Grid.Row="2" Grid.Column="0" HorizontalAlignment="Center">
                            <Ellipse x:Name="EntertainmentWedge" 
                                     Fill="{StaticResource EntertainmentColor}" 
                                     Style="{StaticResource CategoryWedge}"/>
                            <TextBlock Text="🎬 ENTERTAINMENT" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock x:Name="EntertainmentStatusText" Text="Not Completed" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>

                        <!-- Geography Category -->
                        <StackPanel Grid.Row="2" Grid.Column="2" HorizontalAlignment="Center">
                            <Ellipse x:Name="GeographyWedge" 
                                     Fill="{StaticResource GeographyColor}" 
                                     Style="{StaticResource CategoryWedge}"/>
                            <TextBlock Text="🌍 GEOGRAPHY" FontWeight="Bold" 
                                       HorizontalAlignment="Center" Margin="0,10"/>
                            <TextBlock x:Name="GeographyStatusText" Text="Not Completed" 
                                       FontSize="12" HorizontalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>
                    </Grid>

                    <!-- Collected Pieces Display -->
                    <StackPanel Grid.Row="2" Orientation="Horizontal" 
                                HorizontalAlignment="Center" Margin="0,30">
                        <TextBlock Text="Collected Pieces: " FontSize="16" 
                                   FontWeight="SemiBold" VerticalAlignment="Center"/>

                        <StackPanel Orientation="Horizontal" x:Name="CollectedPiecesPanel">
                            <!-- These will be populated dynamically -->
                        </StackPanel>

                        <TextBlock x:Name="PiecesCountText" Text="(0/5)" 
                                   FontSize="16" VerticalAlignment="Center" 
                                   Margin="10,0,0,0"/>
                    </StackPanel>
                </Grid>

                <!-- Bottom Controls -->
                <Border Grid.Row="2" Background="#F3F4F6" BorderThickness="0,1,0,0" 
                        BorderBrush="#D1D5DB">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" 
                                VerticalAlignment="Center">
                        <Button x:Name="LogoutButton" Content="Logout" 
                                Style="{StaticResource ModernButton}" 
                                Background="#6B7280"/>
                        <Button x:Name="ProfileButton" Content="Profile" 
                                Style="{StaticResource ModernButton}"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- QUIZ SCREEN -->
            <Grid x:Name="QuizScreen" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="100"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="150"/>
                </Grid.RowDefinitions>

                <!-- Quiz Header -->
                <Border Grid.Row="0" Background="{StaticResource PrimaryBlue}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" VerticalAlignment="Center" Margin="20,0">
                            <TextBlock x:Name="CategoryTitleText" Text="🔬 SCIENCE QUIZ" 
                                       FontSize="20" FontWeight="Bold" 
                                       Foreground="White"/>
                            <TextBlock x:Name="QuestionProgressText" Text="Question 1 of 10" 
                                       FontSize="14" Foreground="#93C5FD"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock Text="Score" FontSize="12" 
                                       Foreground="#93C5FD" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="CurrentScoreText" Text="0" 
                                       FontSize="18" FontWeight="Bold" 
                                       Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" VerticalAlignment="Center">
                            <TextBlock Text="Quiz Timer" FontSize="12" 
                                       Foreground="#93C5FD" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="QuizTimerText" Text="5:00" 
                                       FontSize="18" FontWeight="Bold" 
                                       Foreground="White" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel Grid.Column="3" VerticalAlignment="Center">
                            <TextBlock Text="Question Timer" FontSize="12" 
                                       Foreground="#93C5FD" HorizontalAlignment="Center"/>
                            <TextBlock x:Name="QuestionTimerText" Text="30" 
                                       FontSize="18" FontWeight="Bold" 
                                       Foreground="{StaticResource AccentGold}" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Question Area -->
                <Grid Grid.Row="1" Margin="40">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Question Text -->
                    <Border Grid.Row="0" Background="White" 
                            CornerRadius="10" Padding="30" Margin="0,0,0,30">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
                        </Border.Effect>
                        <TextBlock x:Name="QuestionText" 
                                   Text="What is the chemical symbol for Gold?" 
                                   FontSize="22" FontWeight="SemiBold" 
                                   Foreground="{StaticResource TextDark}"
                                   TextWrapping="Wrap" 
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"/>
                    </Border>

                    <!-- Answer Options -->
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button x:Name="AnswerA" Grid.Row="0" Grid.Column="0" 
                                Content="A) Au" 
                                Style="{StaticResource ModernButton}" 
                                FontSize="18" Height="80" Margin="10"
                                Background="White" Foreground="{StaticResource TextDark}"
                                BorderThickness="3" BorderBrush="#E5E7EB"/>

                        <Button x:Name="AnswerB" Grid.Row="0" Grid.Column="1" 
                                Content="B) Ag" 
                                Style="{StaticResource ModernButton}" 
                                FontSize="18" Height="80" Margin="10"
                                Background="White" Foreground="{StaticResource TextDark}"
                                BorderThickness="3" BorderBrush="#E5E7EB"/>

                        <Button x:Name="AnswerC" Grid.Row="1" Grid.Column="0" 
                                Content="C) Go" 
                                Style="{StaticResource ModernButton}" 
                                FontSize="18" Height="80" Margin="10"
                                Background="White" Foreground="{StaticResource TextDark}"
                                BorderThickness="3" BorderBrush="#E5E7EB"/>

                        <Button x:Name="AnswerD" Grid.Row="1" Grid.Column="1" 
                                Content="D) Gd" 
                                Style="{StaticResource ModernButton}" 
                                FontSize="18" Height="80" Margin="10"
                                Background="White" Foreground="{StaticResource TextDark}"
                                BorderThickness="3" BorderBrush="#E5E7EB"/>
                    </Grid>
                </Grid>

                <!-- Quiz Controls -->
                <Border Grid.Row="2" Background="#F3F4F6" BorderThickness="0,1,0,0" 
                        BorderBrush="#D1D5DB">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button x:Name="QuitQuizButton" Grid.Column="0" 
                                Content="Quit Quiz" 
                                Style="{StaticResource ModernButton}" 
                                Background="{StaticResource ErrorRed}" 
                                HorizontalAlignment="Left" VerticalAlignment="Center" 
                                Margin="40,0"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock x:Name="FeedbackText" Text="" 
                                       FontSize="16" FontWeight="SemiBold" 
                                       HorizontalAlignment="Center" Margin="0,5"/>
                            <ProgressBar x:Name="QuestionProgressBar" 
                                         Height="8" Width="300" 
                                         Value="10" Maximum="100" 
                                         Background="#E5E7EB" 
                                         Foreground="{StaticResource SecondaryBlue}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="2" Orientation="Horizontal" 
                                    HorizontalAlignment="Right" VerticalAlignment="Center" 
                                    Margin="0,0,40,0">
                            <Button x:Name="SkipQuestionButton" 
                                    Content="Skip Question" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource WarningOrange}" 
                                    Margin="0,0,10,0"/>
                            <TextBlock x:Name="SkipStatusText" Text="(1 skip available)" 
                                       FontSize="12" VerticalAlignment="Center" 
                                       Foreground="#6B7280"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!-- SCOREBOARD SCREEN -->
            <Grid x:Name="ScoreboardScreen" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="100"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="80"/>
                </Grid.RowDefinitions>

                <!-- Header -->
                <Border Grid.Row="0" Background="{StaticResource PrimaryBlue}">
                    <TextBlock Text="🏆 SCOREBOARD" 
                               FontSize="28" FontWeight="Bold" 
                               Foreground="White" 
                               HorizontalAlignment="Center" 
                               VerticalAlignment="Center"/>
                </Border>

                <!-- Scoreboard Content -->
                <ScrollViewer Grid.Row="1" Margin="40">
                    <StackPanel>
                        <TextBlock Text="Top 10 Players" 
                                   Style="{StaticResource SubHeaderText}" 
                                   Margin="0,0,0,20"/>

                        <DataGrid x:Name="ScoreboardDataGrid" 
                                  AutoGenerateColumns="False" 
                                  IsReadOnly="True"
                                  CanUserReorderColumns="False"
                                  CanUserResizeColumns="False"
                                  GridLinesVisibility="None"
                                  HeadersVisibility="Column"
                                  Background="White"
                                  AlternatingRowBackground="#F9FAFB"
                                  FontSize="16">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Rank" Binding="{Binding Rank}" Width="80"/>
                                <DataGridTextColumn Header="Player" Binding="{Binding PlayerName}" Width="*"/>
                                <DataGridTextColumn Header="Score" Binding="{Binding Score}" Width="120"/>
                                <DataGridTextColumn Header="Completed" Binding="{Binding CompletedCategories}" Width="120"/>
                                <DataGridTextColumn Header="Date" Binding="{Binding Date}" Width="120"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </ScrollViewer>

                <!-- Back Button -->
                <Border Grid.Row="2" Background="#F3F4F6" BorderThickness="0,1,0,0" 
                        BorderBrush="#D1D5DB">
                    <Button x:Name="BackToGameButton" 
                            Content="Back to Game" 
                            Style="{StaticResource ModernButton}" 
                            HorizontalAlignment="Center" 
                            VerticalAlignment="Center"/>
                </Border>
            </Grid>

            <!-- RESULTS SCREEN -->
            <Grid x:Name="ResultsScreen" Visibility="Collapsed">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#1E3A8A" Offset="0"/>
                        <GradientStop Color="#3B82F6" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <Border Background="White" 
                        Width="500" Height="600" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="20" ShadowDepth="5" Opacity="0.3"/>
                    </Border.Effect>

                    <StackPanel Margin="40" HorizontalAlignment="Center">
                        <TextBlock x:Name="ResultsTitleText" Text="🎉 QUIZ COMPLETE!" 
                                   FontSize="28" FontWeight="Bold" 
                                   Foreground="{StaticResource PrimaryBlue}"
                                   HorizontalAlignment="Center" Margin="0,0,0,20"/>

                        <!-- Category Icon -->
                        <Ellipse x:Name="ResultsCategoryIcon" 
                                 Width="100" Height="100" 
                                 Fill="{StaticResource ScienceColor}"
                                 Margin="0,0,0,20"/>

                        <!-- Score Display -->
                        <TextBlock Text="Your Score:" FontSize="18" 
                                   Foreground="{StaticResource TextDark}"
                                   HorizontalAlignment="Center" Margin="0,0,0,5"/>

                        <TextBlock x:Name="FinalScoreText" Text="850" 
                                   FontSize="48" FontWeight="Bold" 
                                   Foreground="{StaticResource AccentGold}"
                                   HorizontalAlignment="Center" Margin="0,0,0,10"/>

                        <TextBlock x:Name="ScoreDetailsText" 
                                   Text="8/10 questions correct • 2 minutes remaining" 
                                   FontSize="14" Foreground="#6B7280"
                                   HorizontalAlignment="Center" Margin="0,0,0,30"/>

                        <!-- Achievement Display -->
                        <Border x:Name="AchievementBorder" 
                                Background="#FEF3C7" BorderBrush="{StaticResource AccentGold}" 
                                BorderThickness="2" CornerRadius="8" 
                                Padding="15" Margin="0,0,0,20" 
                                Visibility="Collapsed">
                            <StackPanel>
                                <TextBlock Text="🏆 NEW HIGH SCORE!" 
                                           FontSize="16" FontWeight="Bold" 
                                           Foreground="{StaticResource AccentGold}"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="RankingText" Text="You're now #3 on the leaderboard!" 
                                           FontSize="14" HorizontalAlignment="Center" 
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Piece Earned -->
                        <Border x:Name="PieceEarnedBorder" 
                                Background="#ECFDF5" BorderBrush="{StaticResource SuccessGreen}" 
                                BorderThickness="2" CornerRadius="8" 
                                Padding="15" Margin="0,0,0,30">
                            <StackPanel>
                                <TextBlock Text="🎯 PIECE EARNED!" 
                                           FontSize="16" FontWeight="Bold" 
                                           Foreground="{StaticResource SuccessGreen}"
                                           HorizontalAlignment="Center"/>
                                <TextBlock x:Name="PieceEarnedText" Text="Science piece added to your collection!" 
                                           FontSize="14" HorizontalAlignment="Center" 
                                           Margin="0,5,0,0"/>
                            </StackPanel>
                        </Border>

                        <!-- Action Buttons -->
                        <StackPanel>
                            <Button x:Name="ContinueGameButton" 
                                    Content="Continue Game" 
                                    Style="{StaticResource PrimaryButton}" 
                                    Margin="0,0,0,10"/>
                            <Button x:Name="ViewScoreboardButton" 
                                    Content="View Scoreboard" 
                                    Style="{StaticResource ModernButton}" 
                                    Margin="0,0,0,10"/>
                            <Button x:Name="BackToMenuButton" 
                                    Content="Back to Main Menu" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="#6B7280"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- FINAL CHALLENGE SCREEN -->
            <Grid x:Name="FinalChallengeScreen" Visibility="Collapsed">
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#7C2D12" Offset="0"/>
                        <GradientStop Color="#DC2626" Offset="0.5"/>
                        <GradientStop Color="#7C2D12" Offset="1"/>
                    </LinearGradientBrush>
                </Grid.Background>

                <Border Background="White" 
                        Width="600" Height="500" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="25" ShadowDepth="8" Opacity="0.4"/>
                    </Border.Effect>

                    <StackPanel Margin="40" HorizontalAlignment="Center">
                        <TextBlock Text="🏆 FINAL CHALLENGE" 
                                   FontSize="32" FontWeight="Bold" 
                                   Foreground="#7C2D12"
                                   HorizontalAlignment="Center" Margin="0,0,0,20"/>

                        <TextBlock Text="Congratulations! You've collected all category pieces!" 
                                   FontSize="16" Foreground="{StaticResource TextDark}"
                                   HorizontalAlignment="Center" Margin="0,0,0,30"
                                   TextWrapping="Wrap"/>

                        <!-- Collected Pieces Display -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" 
                                    Margin="0,0,0,30">
                            <Ellipse Fill="{StaticResource ScienceColor}" Width="50" Height="50" Margin="5"/>
                            <Ellipse Fill="{StaticResource HistoryColor}" Width="50" Height="50" Margin="5"/>
                            <Ellipse Fill="{StaticResource SportsColor}" Width="50" Height="50" Margin="5"/>
                            <Ellipse Fill="{StaticResource EntertainmentColor}" Width="50" Height="50" Margin="5"/>
                            <Ellipse Fill="{StaticResource GeographyColor}" Width="50" Height="50" Margin="5"/>
                        </StackPanel>

                        <TextBlock Text="The Final Challenge contains 20 difficult questions from ALL categories." 
                                   FontSize="14" Foreground="#6B7280"
                                   HorizontalAlignment="Center" Margin="0,0,0,5"
                                   TextWrapping="Wrap"/>

                        <TextBlock Text="You'll have 10 minutes to complete it. No skips allowed!" 
                                   FontSize="14" FontWeight="SemiBold" 
                                   Foreground="{StaticResource ErrorRed}"
                                   HorizontalAlignment="Center" Margin="0,0,0,40"
                                   TextWrapping="Wrap"/>

                        <!-- Challenge Stats -->
                        <Grid Margin="0,0,0,30">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="20" FontSize="24" FontWeight="Bold" 
                                           Foreground="{StaticResource PrimaryBlue}" 
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Questions" FontSize="12" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="10:00" FontSize="24" FontWeight="Bold" 
                                           Foreground="{StaticResource WarningOrange}" 
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Time Limit" FontSize="12" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="0" FontSize="24" FontWeight="Bold" 
                                           Foreground="{StaticResource ErrorRed}" 
                                           HorizontalAlignment="Center"/>
                                <TextBlock Text="Skips" FontSize="12" 
                                           HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Grid>

                        <!-- Action Buttons -->
                        <StackPanel>
                            <Button x:Name="StartFinalChallengeButton" 
                                    Content="START FINAL CHALLENGE" 
                                    Style="{StaticResource PrimaryButton}" 
                                    FontSize="18" Height="50" 
                                    Margin="0,0,0,15"/>
                            <Button x:Name="BackFromFinalButton" 
                                    Content="Back to Game Board" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="#6B7280"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- ADMIN PANEL -->
            <Grid x:Name="AdminScreen" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="80"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Admin Header -->
                <Border Grid.Row="0" Background="#7C2D12">
                    <Grid>
                        <TextBlock Text="⚙️ ADMIN PANEL" 
                                   FontSize="24" FontWeight="Bold" 
                                   Foreground="White" 
                                   VerticalAlignment="Center" 
                                   HorizontalAlignment="Center"/>

                        <Button x:Name="AdminLogoutButton" 
                                Content="Logout" 
                                Style="{StaticResource ModernButton}" 
                                Background="{StaticResource ErrorRed}"
                                HorizontalAlignment="Right" 
                                VerticalAlignment="Center" 
                                Margin="20"/>
                    </Grid>
                </Border>

                <!-- Admin Content -->
                <TabControl Grid.Row="1" Margin="20">
                    <TabItem Header="📊 Users" FontSize="16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="60"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="User Management" 
                                       Style="{StaticResource SubHeaderText}" 
                                       HorizontalAlignment="Left" Margin="0,10,0,20"/>

                            <DataGrid Grid.Row="1" x:Name="UsersDataGrid" 
                                      AutoGenerateColumns="False" 
                                      CanUserAddRows="False"
                                      GridLinesVisibility="Horizontal"
                                      HeadersVisibility="Column"
                                      Background="White"
                                      AlternatingRowBackground="#F9FAFB">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Username" Binding="{Binding Username}" Width="200"/>
                                    <DataGridTextColumn Header="Total Score" Binding="{Binding TotalScore}" Width="120"/>
                                    <DataGridTextColumn Header="Games Played" Binding="{Binding GamesPlayed}" Width="120"/>
                                    <DataGridTextColumn Header="Last Login" Binding="{Binding LastLogin}" Width="150"/>
                                    <DataGridTemplateColumn Header="Actions" Width="200">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="Edit" Margin="2" Padding="5"/>
                                                    <Button Content="Delete" Margin="2" Padding="5" 
                                                            Background="{StaticResource ErrorRed}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>

                            <Button Grid.Row="2" x:Name="AddUserButton" 
                                    Content="Add New User" 
                                    Style="{StaticResource ModernButton}" 
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center" 
                                    Margin="0,10"/>
                        </Grid>
                    </TabItem>

                    <TabItem Header="❓ Questions" FontSize="16">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="60"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="Question Management" 
                                       Style="{StaticResource SubHeaderText}" 
                                       HorizontalAlignment="Left" Margin="0,10,0,10"/>

                            <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="0,0,0,20">
                                <TextBlock Text="Filter by Category:" 
                                           VerticalAlignment="Center" Margin="0,0,10,0"/>
                                <ComboBox x:Name="CategoryFilterComboBox" Width="150" Height="30">
                                    <ComboBoxItem Content="All Categories"/>
                                    <ComboBoxItem Content="Science"/>
                                    <ComboBoxItem Content="History"/>
                                    <ComboBoxItem Content="Sports"/>
                                    <ComboBoxItem Content="Entertainment"/>
                                    <ComboBoxItem Content="Geography"/>
                                </ComboBox>
                            </StackPanel>

                            <DataGrid Grid.Row="2" x:Name="QuestionsDataGrid" 
                                      AutoGenerateColumns="False" 
                                      CanUserAddRows="False"
                                      GridLinesVisibility="Horizontal"
                                      HeadersVisibility="Column"
                                      Background="White"
                                      AlternatingRowBackground="#F9FAFB">
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
                                    <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="120"/>
                                    <DataGridTextColumn Header="Question" Binding="{Binding QuestionText}" Width="300"/>
                                    <DataGridTextColumn Header="Difficulty" Binding="{Binding Difficulty}" Width="80"/>
                                    <DataGridTemplateColumn Header="Actions" Width="200">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="Edit" Margin="2" Padding="5"/>
                                                    <Button Content="Delete" Margin="2" Padding="5" 
                                                            Background="{StaticResource ErrorRed}"/>
                                                </StackPanel>
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                </DataGrid.Columns>
                            </DataGrid>

                            <Button Grid.Row="3" x:Name="AddQuestionButton" 
                                    Content="Add New Question" 
                                    Style="{StaticResource ModernButton}" 
                                    HorizontalAlignment="Left" 
                                    VerticalAlignment="Center" 
                                    Margin="0,10"/>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>

            <!-- CATEGORY SELECTION DIALOG -->
            <Grid x:Name="CategorySelectionOverlay" Visibility="Collapsed" 
                  Background="#80000000">
                <Border Background="White" 
                        Width="400" Height="300" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <StackPanel Margin="30">
                        <TextBlock Text="Select Category" 
                                   Style="{StaticResource SubHeaderText}" 
                                   Margin="0,0,0,30"/>

                        <StackPanel>
                            <Button x:Name="SelectScienceButton" Content="🔬 Science" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource ScienceColor}" 
                                    Height="40" Margin="0,5"/>
                            <Button x:Name="SelectHistoryButton" Content="🏛️ History" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource HistoryColor}" 
                                    Height="40" Margin="0,5"/>
                            <Button x:Name="SelectSportsButton" Content="⚽ Sports" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource SportsColor}" 
                                    Height="40" Margin="0,5"/>
                            <Button x:Name="SelectEntertainmentButton" Content="🎬 Entertainment" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource EntertainmentColor}" 
                                    Height="40" Margin="0,5"/>
                            <Button x:Name="SelectGeographyButton" Content="🌍 Geography" 
                                    Style="{StaticResource ModernButton}" 
                                    Background="{StaticResource GeographyColor}" 
                                    Height="40" Margin="0,5"/>
                        </StackPanel>

                        <Button x:Name="CancelCategorySelection" 
                                Content="Cancel" 
                                Style="{StaticResource ModernButton}" 
                                Background="#6B7280" 
                                Margin="0,20,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- ADD/EDIT QUESTION DIALOG -->
            <Grid x:Name="QuestionDialogOverlay" Visibility="Collapsed" 
                  Background="#80000000">
                <Border Background="White" 
                        Width="600" Height="550" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <ScrollViewer>
                        <StackPanel Margin="30">
                            <TextBlock x:Name="QuestionDialogTitle" Text="Add New Question" 
                                       Style="{StaticResource SubHeaderText}" 
                                       Margin="0,0,0,20"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                    <TextBlock Text="Category:" Margin="0,0,0,5"/>
                                    <ComboBox x:Name="QuestionCategoryComboBox" Height="30">
                                        <ComboBoxItem Content="Science"/>
                                        <ComboBoxItem Content="History"/>
                                        <ComboBoxItem Content="Sports"/>
                                        <ComboBoxItem Content="Entertainment"/>
                                        <ComboBoxItem Content="Geography"/>
                                    </ComboBox>
                                </StackPanel>

                                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                    <TextBlock Text="Difficulty:" Margin="0,0,0,5"/>
                                    <ComboBox x:Name="QuestionDifficultyComboBox" Height="30">
                                        <ComboBoxItem Content="Easy"/>
                                        <ComboBoxItem Content="Medium"/>
                                        <ComboBoxItem Content="Hard"/>
                                    </ComboBox>
                                </StackPanel>
                            </Grid>

                            <TextBlock Text="Question:" Margin="0,20,0,5"/>
                            <TextBox x:Name="QuestionTextBox" 
                                     Style="{StaticResource ModernTextBox}" 
                                     Height="60" TextWrapping="Wrap" 
                                     VerticalScrollBarVisibility="Auto"/>

                            <TextBlock Text="Answer A (Correct):" Margin="0,15,0,5"/>
                            <TextBox x:Name="AnswerATextBox" Style="{StaticResource ModernTextBox}"/>

                            <TextBlock Text="Answer B:" Margin="0,10,0,5"/>
                            <TextBox x:Name="AnswerBTextBox" Style="{StaticResource ModernTextBox}"/>

                            <TextBlock Text="Answer C:" Margin="0,10,0,5"/>
                            <TextBox x:Name="AnswerCTextBox" Style="{StaticResource ModernTextBox}"/>

                            <TextBlock Text="Answer D:" Margin="0,10,0,5"/>
                            <TextBox x:Name="AnswerDTextBox" Style="{StaticResource ModernTextBox}"/>

                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" 
                                        Margin="0,30,0,0">
                                <Button x:Name="SaveQuestionButton" 
                                        Content="Save Question" 
                                        Style="{StaticResource PrimaryButton}" 
                                        Margin="0,0,10,0"/>
                                <Button x:Name="CancelQuestionButton" 
                                        Content="Cancel" 
                                        Style="{StaticResource ModernButton}" 
                                        Background="#6B7280" 
                                        Margin="10,0,0,0"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>

            <!-- LOADING SCREEN -->
            <Grid x:Name="LoadingScreen" Visibility="Collapsed" 
                  Background="#80000000">
                <Border Background="White" 
                        Width="300" Height="150" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="🧠" FontSize="48" 
                                   HorizontalAlignment="Center" Margin="0,0,0,20"/>
                        <TextBlock x:Name="LoadingText" Text="Loading questions..." 
                                   FontSize="16" HorizontalAlignment="Center"/>
                        <ProgressBar x:Name="LoadingProgressBar" 
                                     Width="200" Height="8" 
                                     IsIndeterminate="True" 
                                     Margin="0,20,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- TIMER WARNING POPUP -->
            <Grid x:Name="TimerWarningOverlay" Visibility="Collapsed" 
                  Background="#80DC2626">
                <Border Background="White" 
                        Width="300" Height="150" 
                        CornerRadius="15"
                        VerticalAlignment="Center" 
                        HorizontalAlignment="Center"
                        BorderThickness="3" BorderBrush="{StaticResource ErrorRed}">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                        <TextBlock Text="⏰" FontSize="48" 
                                   HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <TextBlock Text="TIME WARNING!" 
                                   FontSize="18" FontWeight="Bold" 
                                   Foreground="{StaticResource ErrorRed}"
                                   HorizontalAlignment="Center"/>
                        <TextBlock x:Name="WarningText" Text="30 seconds remaining!" 
                                   FontSize="14" HorizontalAlignment="Center" 
                                   Margin="0,5"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Grid>
</Window>